* BRANCH multi-line-dowrc-cmds
g/\[dow.os.plugin :refer/norm o[dow.more :refer [index-of-while]]

(defn load-cmds! [path]
  (try (let [dowrc-slurp (slurp path)]
         (if (= dowrc-slurp @*last-dowrc-slurp*)
           @*cmds*
           (do (reset! *last-dowrc-slurp* dowrc-slurp)
               (->> (str dowrc-slurp)
                    ;(#(replace % #"([^)])\n" "$1 "))
                    (process-cmds)
                    ((fn [s]
                        (js/setTimeout #(.log js/console s) 1000)
                        s))
                    (reduce [] process-dowrc)
                    ((fn [s]
                        (js/setTimeout #(.log js/console s) 1000)
                        s))
                    (map #(hash-map (keyword (first %)) [(rest %)]))
                    (apply merge-with into)))))
       (catch js/Object e #_(get-vanilla-dowrc))))
